2003-02-21  Kaz Sasayama  <kaz2003@hypercore.co.jp>

	* Version 2.0.3.

	* configure.ac: Update PACKAGE_VERSION.
	* configure: Regenerated.

	* npaudio.bpr (FileDescription): Update version numbers.

	* NEWS: Updated.

	* mozilla/npupp.h: Add prototype for NP_GetValue.

2003-02-20  Kaz Sasayama  <kaz2003@hypercore.co.jp>

	* audio.cpp (stop): Define also if _WIN32.
	(stop) [_WIN32]: Stop playback.
	(NPP_New): Initialize audio_data members explicitly.
	(NPP_Destroy, NPP_NewStream): Use stop also if _WIN32.

	* configure.ac: Create link mozilla/prcpucfg.h according to the
	host operating system.
	* configure: Regenerated.

	* mozilla/Makefile.am (noinst_HEADERS): Remove prcpucfg.h.  Add
	the new files.
	(distclean-local): New target.
	* mozilla/Makefile.in: Regenerated.

	* mozilla/_linux.cfg: Renamed from prcpucfg.h.
	* mozilla/_win95.cfg: New file.

	* Makefile.am (INCLUDES): Add -Imozilla
	* Makefile.in: Regenerated.

	* audio.cpp (struct audio_data) [_WIN32]: Add new member graph.
	[_WIN32]: Remove static vaiables.
	(NPP_New, NPP_Destroy, NPP_NewStream, NPP_StreamAsFile) [_WIN32]:
	Use the new struct member instead of the removed static variables.

	* Makefile.am (EXTRA_DIST): Add the new files.
	* Makefile: Regenerated.

	* npaudio.bpr: New file.
	* npaudio.bpf: New file.
	* npaudio.res: New file.
	* npaudio.def: New file.

	* NEWS: Add new entry for version 2.0.3.

	* audio.cpp (struct audio_data): New struct.
	[!_WIN32]: Remove static variables.
	[!_WIN32] (stop): Add new argument data.  Also change all callers.
	[!_WIN32] (stop): Use the struct member instead of the removed
	static variables.
	(NPP_New): Allocate the private data.
	(NPP_Destroy): Deallocate the private data.
	(NPP_NewStream, NPP_StreamAsFile) [!_WIN32]: Use the struct member
	instead of the removed static variables.
	(NPP_NewStream) [!_WIN32]: Check for audio/wav too.

	* audio.cpp [_WIN32]: Include <dshow.h>.
	(NPP_Initialize) [_WIN32]: Call CoInitialize.
	(NPP_Shutdown) [_WIN32]: Call CoUninitialize.
	[_WIN32]: Add new static variables: graph & control.
	(NPP_New) [_WIN32]: Initialize static variables.
	(NPP_Destroy) [_WIN32]: Clean up static variables.
	(NPP_NewStream) [_WIN32]: Stop playback.
	(NPP_StreamAsFile) [_WIN32]: Start playback of the file.

	* mozilla/npapi.h: Revert to test _WINDOWS for Windows platforms.

	* mozilla/jri.h [_WINDOWS]: Include <windows.h>.

2003-02-16  Kaz Sasayama  <kaz2003@hypercore.co.jp>

	* configure.ac: Change the bug reporting address.
	* configure: Regenerated.

	* Version 2.0.2.

	* configure.ac: Change PACKAGE_VERSION.  Change the test file for
	the source directory.
	* configure: Regenerated.

	* NEWS: Updated.

	* README: Updated.

	* Makefile.am (libaudioplugin_la_SOURCES): Change the file suffix.
	(libmidiplugin_la_SOURCES): Likewise.
	* Makefile.in: Regenerated.

	* np_entry.cpp: Renamed from np_entry.c.
	* npn_gate.cpp: Renamed from npn_gate.c.

	* audio.cpp [_WIN32] (DllMain): New function.

	* midi.cpp [_WIN32] (DllMain): New function.

2003-02-15  Kaz Sasayama  <kaz2003@hypercore.co.jp>

	* mozilla/Makefile.in: Regenerated.
	* mozilla/obsolete/Makefile.in: Regenerated.

	* Makefile.am (libaudioplugin_la_SOURCES): Change the file suffix.
	(libmidiplugin_la_SOURCES): Likewise.
	* Makefile.in: Regenerated.

	* audio.cpp: Renamed from audio.c.
	* midi.cpp: Renamed from midi.c.

	* configure.ac: Add AC_PROG_CXX.
	* configure: Regenerated.

	* np_entry.c [XP_WIN] (NP_Initialize): Use NPP_Initialize.
	[XP_MAC] (Private_Initialize): Use NPP_Initialize.
	[XP_MAC] (Private_Shutdown): Use NPP_Shutdown.

	* midi_mime.h: Removed.

	* Makefile.am (libmidiplugin_la_SOURCES): Delete midi_mime.c.
	* Makefile.in: Regenerated.

	* midi.c [XP_UNIX] (NPP_GetMIMEDescription): Moved from
	midi_mime.c.
	(NPP_GetValue): Handle NPPVpluginNameString and
	NPPVpluginDescriptionString only if XP_UNIX.
	(NPP_SetValue): Fix the type of variable.
	(stop): Hide if _WIN32.
	(NPP_Destroy): Do not call if _WIN32.
	(NPP_NewStream): Likewise.
	(NPP_StreamAsFile): Hide code if _WIN32.

	* mozilla/npapi.h: Test _WIN32 instead of _WINDOWS.

	* audio_mime.c: Removed.

	* Makefile.am (libaudioplugin_la_SOURCES): Delete audio_mime.c.
	* Makefile.in: Regenerated.

	* audio.c (NPP_GetValue): Handle NPPVpluginNameString and
	NPPVpluginDescriptionString only if XP_UNIX.
	(NPP_SetValue): Fix the type of variable.
	(stop): Hide if _WIN32.
	(NPP_Destroy): Do not call stop if _WIN32.
	(NPP_NewStream): Likewise and also do not set format.
	(NPP_StreamAsFile): Hide code if _WIN32.
	[XP_UNIX] (NPP_GetMIMEDescription): Moved from audio_mime.c.

2003-02-13  Kaz Sasayama  <kaz2003@hypercore.co.jp>

	* Makefile.am (INCLUDES): Remove -DXP_UNIX.
	* Makefile: Regenerated.

	* audio.c: Remove the inclusion of <unistd.h>.
	* midi.c: Likewise.

	* common.h [HAVE_UNISTD_H]: Include <unistd.h>.
	[_WIN32]: Include <windows.h>.

	* audio.c: Move the _GNU_SOURCE definition to the beginning.
	* audio_mime.c: Likewise.
	* midi.c: Likewise.
	* midi_mime.c: Likewise.

	* NEWS: Updated.

	* AUTHORS: Updated.

	* README: Updated.

2003-02-12  Kaz Sasayama  <kaz2003@hypercore.co.jp>

	* mozilla/npupp.h (struct _NPPluginFuncs): #if out javaClass.
	* np_entry.c (fillPluginFunctionTable): #if out the javaClass
	initialization.

	* audio_mime.c (NPP_GetMIMEDescription): Remove extensions for
	audio/wav.
	* midi_mime.c (NPP_GetMIMEDescription): Remove extensions for
	audio/midi.

	* audio.c (NPP_StreamAsFile): Avoid EXIT_FAILURE.
	* midi.c (NPP_StreamAsFile): Likewise.

	* mozilla/Makefile.am (noinst_HEADERS): Delete removed files.
	* mozilla/Makefile.in: Rebuilt.

	* mozilla/jritypes.h: Removed.
	* mozilla/jri_md.h: Removed.
	* mozilla/jni.h: Removed.
	* mozilla/jni_md.h: Removed.

	* mozilla/jri.h: Replaced with a dummy header.

	* Version 2.0.1.

	* configure.ac: Update PACKAGE_VERSION.

2003-02-11  Kaz Sasayama  <kaz2003@hypercore.co.jp>

	* Begin hacking.

